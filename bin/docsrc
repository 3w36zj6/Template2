#!/usr/bin/perl -w                                         # -*- perl -*-

use strict;
use lib qw( lib );
use Template;

my $DOCSRC   = 'docsrc';
my $MANIFEST = "$DOCSRC/MANIFEST";
my @IGNORE   = ( '.*CVS.*', "$DOCSRC/\\(pod\\|txt\\)/.*" );
my $VERSION  = $Template::VERSION;
my $TARFILE  = "Template-docsrc-$VERSION.tar.gz";

die "cannot find directory '$DOCSRC'\n" unless -d $DOCSRC;

my $not = join(' ', map { "-not -regex '$_'" } @IGNORE);

print STDERR "Building $MANIFEST\n";
system("find $DOCSRC $not > $MANIFEST");
print STDERR "Building $TARFILE\n";
system("tar zcf $TARFILE -T $MANIFEST");

